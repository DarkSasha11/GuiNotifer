-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
-- ‚ïë     SEMI INSTA STEAL v2.0 IMPROVED      ‚ïë
-- ‚ïë     BY ARTFUL & MYSKYP  ‚ô•               ‚ïë
-- ‚ïë     https://discord.gg/MT6BXdH9q        ‚ïë
-- ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

local function safeCall(func, ...)
    local start = tick()
    local success, result = pcall(func, ...)
    local duration = tick() - start
    if duration > 0.08 then
        warn("Slow function:", debug.info(func, "n") or "anonymous", "took", duration, "seconds")
    end
    return success, result
end

-- ============ CLEANUP PREVIOUS EXECUTION ============
if _G.MySkyCleanup then
    pcall(_G.MySkyCleanup)
end

_G.MySkyCleanup = function()
    if _G.MySkyConnections then
        for _, conn in ipairs(_G.MySkyConnections) do
            pcall(function() conn:Disconnect() end)
        end
        _G.MySkyConnections = {}
    end
    for _, part in ipairs(workspace:GetChildren()) do
        if part.Name:find("myskyp") or part.Name:find("Cosmic") or part.Name == "CustomGrabPoint" then
            pcall(function() part:Destroy() end)
        end
    end
    local coreGui = game:GetService("CoreGui")
    local existingGui = coreGui:FindFirstChild("SemiInstaSteal")
    if existingGui then pcall(function() existingGui:Destroy() end) end
end

pcall(_G.MySkyCleanup)

-- ============ SERVICES ============
local Services = {}
local servicePromises = {}

local function getService(serviceName)
    if Services[serviceName] then return Services[serviceName] end
    if not servicePromises[serviceName] then
        servicePromises[serviceName] = task.spawn(function()
            Services[serviceName] = game:GetService(serviceName)
            servicePromises[serviceName] = nil
        end)
    end
    while not Services[serviceName] do task.wait() end
    return Services[serviceName]
end

local Players             = getService("Players")
local LocalPlayer         = Players.LocalPlayer
local ProximityPromptService = getService("ProximityPromptService")
local UserInputService    = getService("UserInputService")
local TweenService        = getService("TweenService")
local RunService          = getService("RunService")

local connections = {}
_G.MySkyConnections = connections

print("‚úÖ Script loaded for:", LocalPlayer.Name)

if _G.MyskypInstaSteal then
    pcall(_G.MySkyCleanup)
    task.wait(0.1)
end
_G.MyskypInstaSteal = true

-- ============ CONFIGURATION ============
local TP_POSITIONS = {
    BASE1 = {
        INFO_POS      = CFrame.new(334.76, 55.334, 99.40),
        TELEPORT_POS  = CFrame.new(-352.98, -7.30, 74.3),
        STAND_HERE_PART = CFrame.new(-334.76, -5.334, 99.40) * CFrame.new(0, 2.6, 0)
    },
    BASE2 = {
        INFO_POS      = CFrame.new(334.76, 55.334, 19.17),
        TELEPORT_POS  = CFrame.new(-352.98, -7.30, 45.76),
        STAND_HERE_PART = CFrame.new(-336.41, -5.34, 19.20) * CFrame.new(0, 2.6, 0)
    }
}

-- ============ STATE VARIABLES ============
local CustomPosCFrame  = nil
local CustomPart       = nil
local CustomBeam       = nil
local CustomAtt0       = nil
local CustomAtt1       = nil

local TP_DELAY             = 0.15
local TPSysEnabled         = true
local lastTeleportTime     = 0
local TELEPORT_COOLDOWN    = 0.8
local lastMarkerUpdate     = 0
local MARKER_UPDATE_INTERVAL = 0.4

local desyncFirstActivation      = true
local desyncPermanentlyActivated = false

local IS_MOBILE = UserInputService.TouchEnabled
local IS_PC     = not IS_MOBILE
print("üì± Device:", IS_MOBILE and "MOBILE" or "PC")

-- ============ THEME ============
local T = {
    bg        = Color3.fromRGB(12, 14, 22),
    card      = Color3.fromRGB(22, 28, 44),
    cardHover = Color3.fromRGB(30, 38, 60),
    accent    = Color3.fromRGB(100, 149, 255),
    accent2   = Color3.fromRGB(180, 120, 255),
    text      = Color3.fromRGB(230, 235, 255),
    subtext   = Color3.fromRGB(140, 155, 200),
    green     = Color3.fromRGB(80, 230, 130),
    red       = Color3.fromRGB(255, 85, 95),
    yellow    = Color3.fromRGB(255, 210, 60),
    blue      = Color3.fromRGB(60, 140, 255),
    orange    = Color3.fromRGB(255, 150, 50),
}

-- ============ INSTA STEAL ============
local function instaStealTarget(prompt)
    if not prompt then return end
    task.spawn(function()
        if fireproximityprompt then
            fireproximityprompt(prompt)
        end
        if getconnections then
            for _, c in pairs(getconnections(prompt.PromptButtonHoldBegan)) do c:Fire() end
            task.wait()
            for _, c in pairs(getconnections(prompt.Triggered)) do c:Fire() end
            for _, c in pairs(getconnections(prompt.PromptButtonHoldEnded)) do c:Fire() end
        end
        pcall(function()
            prompt:InputHoldBegin()
            task.wait(prompt.HoldDuration)
            prompt:InputHoldEnd()
        end)
    end)
end

local function autoClickNearbyPrompt()
    task.spawn(function()
        task.wait(0.15)
        local character = LocalPlayer.Character
        if not character then return end
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local nearestPrompt   = nil
        local nearestDistance = 20

        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("ProximityPrompt") then
                local pp = obj.Parent
                if pp and pp:IsA("BasePart") then
                    local dist = (pp.Position - hrp.Position).Magnitude
                    if dist <= nearestDistance then
                        nearestPrompt   = obj
                        nearestDistance = dist
                    end
                end
            end
        end

        if nearestPrompt then
            print("‚ö° FAST STEAL ON:", nearestPrompt.Parent.Name)
            instaStealTarget(nearestPrompt)
        else
            print("‚ö†Ô∏è No nearby prompt found")
        end
    end)
end

-- ============ HELPERS ============
local function cleanup()
    for _, conn in ipairs(connections) do
        pcall(function() conn:Disconnect() end)
    end
    connections = {}
end

local function getCurrentBasePosition()
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return TP_POSITIONS.BASE1.INFO_POS
    end
    local hrp  = LocalPlayer.Character.HumanoidRootPart
    local pos  = hrp.Position
    local d1   = (pos - TP_POSITIONS.BASE1.INFO_POS.Position).Magnitude
    local d2   = (pos - TP_POSITIONS.BASE2.INFO_POS.Position).Magnitude
    return d1 < d2 and TP_POSITIONS.BASE1.INFO_POS or TP_POSITIONS.BASE2.INFO_POS
end

-- ============ MARKER ============
local function CreateMarker()
    local basePos   = getCurrentBasePosition()
    local markerPos = basePos * CFrame.new(0, -3.2, 0)

    local part = workspace:FindFirstChild("myskypBest") or Instance.new("Part")
    part.Name         = "myskypBest"
    part.Size         = Vector3.new(1.2, 1.2, 1.2)
    part.CFrame       = markerPos
    part.Anchored     = true
    part.CanCollide   = false
    part.Material     = Enum.Material.Neon
    part.Color        = Color3.fromRGB(0, 220, 255)
    part.Transparency = 0.2
    part.Parent       = workspace

    if not part:FindFirstChild("MyskypBillboard") then
        local gui = Instance.new("BillboardGui")
        gui.Name          = "MyskypBillboard"
        gui.AlwaysOnTop   = true
        gui.Size          = UDim2.new(0, 220, 0, 55)
        gui.ExtentsOffset = Vector3.new(0, 3.5, 0)
        gui.Parent        = part

        local bg = Instance.new("Frame")
        bg.Size                  = UDim2.new(1,0,1,0)
        bg.BackgroundColor3      = Color3.fromRGB(12, 14, 22)
        bg.BackgroundTransparency = 0.3
        bg.BorderSizePixel       = 0
        bg.Parent                = gui
        Instance.new("UICorner", bg).CornerRadius = UDim.new(0,10)
        local st = Instance.new("UIStroke", bg)
        st.Color = Color3.fromRGB(0,220,255)
        st.Thickness = 1.5
        st.Transparency = 0.3

        local label = Instance.new("TextLabel")
        label.Name                 = "Text"
        label.BackgroundTransparency = 1
        label.Size                 = UDim2.new(1, 0, 1, 0)
        label.Font                 = Enum.Font.GothamBold
        label.TextSize             = 15
        label.TextColor3           = Color3.fromRGB(255,255,255)
        label.Text                 = "üìç STAND HERE"
        label.TextStrokeTransparency = 0.5
        label.Parent               = bg
    end

    return part
end

local Marker = CreateMarker()

-- ============ CUSTOM POSITION VISUALS ============
local function ClearCustomVisuals()
    if CustomPart  then CustomPart:Destroy();  CustomPart  = nil end
    if CustomBeam  then CustomBeam:Destroy();  CustomBeam  = nil end
    if CustomAtt0  then CustomAtt0:Destroy();  CustomAtt0  = nil end
    if CustomAtt1  then CustomAtt1:Destroy();  CustomAtt1  = nil end
end

local function UpdateCustomVisuals()
    if not CustomPosCFrame then return end
    local hasCarpet = LocalPlayer.Backpack:FindFirstChild("Flying Carpet")
        or (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Flying Carpet"))

    if not CustomPart then
        CustomPart          = Instance.new("Part")
        CustomPart.Name     = "CustomGrabPoint"
        CustomPart.Size     = Vector3.new(4.5, 0.25, 4.5)
        CustomPart.Anchored = true
        CustomPart.CanCollide = false
        CustomPart.Material = Enum.Material.Neon
        CustomPart.Color    = Color3.fromRGB(0, 140, 255)
        CustomPart.Transparency = 0.25
        CustomPart.Parent   = workspace

        local bb = Instance.new("BillboardGui")
        bb.Name       = "Info"
        bb.Size       = UDim2.new(0, 220, 0, 90)
        bb.StudsOffset = Vector3.new(0, 5, 0)
        bb.AlwaysOnTop = true
        bb.Parent     = CustomPart

        local bg2 = Instance.new("Frame")
        bg2.Size = UDim2.new(1,0,1,0)
        bg2.BackgroundColor3 = Color3.fromRGB(12,14,22)
        bg2.BackgroundTransparency = 0.3
        bg2.BorderSizePixel = 0
        bg2.Parent = bb
        Instance.new("UICorner", bg2).CornerRadius = UDim.new(0,10)
        local st2 = Instance.new("UIStroke", bg2)
        st2.Color = Color3.fromRGB(0,140,255)
        st2.Thickness = 1.5
        st2.Transparency = 0.3

        local headerLbl = Instance.new("TextLabel")
        headerLbl.Size = UDim2.new(1,0,0,30)
        headerLbl.Position = UDim2.new(0,0,0,5)
        headerLbl.BackgroundTransparency = 1
        headerLbl.Text = "üìç CUSTOM POSITION"
        headerLbl.Font = Enum.Font.GothamBlack
        headerLbl.TextSize = 14
        headerLbl.TextColor3 = Color3.fromRGB(0, 190, 255)
        headerLbl.TextStrokeTransparency = 0.5
        headerLbl.Parent = bg2

        local statusLbl = Instance.new("TextLabel")
        statusLbl.Name = "Status"
        statusLbl.Size = UDim2.new(1,0,0,24)
        statusLbl.Position = UDim2.new(0,0,0,36)
        statusLbl.BackgroundTransparency = 1
        statusLbl.Text = "..."
        statusLbl.Font = Enum.Font.GothamBold
        statusLbl.TextSize = 13
        statusLbl.TextColor3 = Color3.fromRGB(255,255,255)
        statusLbl.TextStrokeTransparency = 0.6
        statusLbl.Parent = bg2

        CustomAtt1        = Instance.new("Attachment")
        CustomAtt1.Parent = CustomPart
    end

    CustomPart.CFrame = CustomPosCFrame

    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp  = LocalPlayer.Character.HumanoidRootPart
        local dist = (hrp.Position - CustomPosCFrame.Position).Magnitude

        if not CustomAtt0 or CustomAtt0.Parent ~= hrp then
            if CustomAtt0 then CustomAtt0:Destroy() end
            CustomAtt0        = Instance.new("Attachment")
            CustomAtt0.Parent = hrp
        end

        if not CustomBeam then
            CustomBeam              = Instance.new("Beam")
            CustomBeam.Texture      = "rbxassetid://446111271"
            CustomBeam.TextureSpeed = 2
            CustomBeam.Width0       = 0.4
            CustomBeam.Width1       = 2
            CustomBeam.FaceCamera   = true
            CustomBeam.Transparency = NumberSequence.new(0.25)
            CustomBeam.Parent       = workspace
        end
        CustomBeam.Attachment0 = CustomAtt0
        CustomBeam.Attachment1 = CustomAtt1

        local isSafe = hasCarpet and dist < 2000
        local statusLbl = CustomPart:FindFirstChild("Info") and CustomPart.Info:FindFirstChild("Status")

        if isSafe then
            CustomBeam.Color = ColorSequence.new(Color3.fromRGB(60, 230, 120))
            CustomPart.Color = Color3.fromRGB(0, 200, 100)
            if statusLbl then
                statusLbl.Text       = string.format("‚úÖ READY  (%d studs)", math.floor(dist))
                statusLbl.TextColor3 = Color3.fromRGB(80, 240, 130)
            end
        else
            CustomBeam.Color = ColorSequence.new(Color3.fromRGB(255, 60, 60))
            CustomPart.Color = Color3.fromRGB(255, 60, 60)
            local reason = hasCarpet and "TOO FAR" or "NO CARPET"
            if statusLbl then
                statusLbl.Text       = string.format("‚ùå %s  (%d studs)", reason, math.floor(dist))
                statusLbl.TextColor3 = Color3.fromRGB(255, 80, 80)
            end
        end
    end
end

RunService.Heartbeat:Connect(function()
    if CustomPosCFrame then
        UpdateCustomVisuals()
    elseif CustomPart then
        ClearCustomVisuals()
    end
end)

-- ============ COSMIC INDICATORS ============
local function createCosmicIndicator(name, position, color, text)
    local part = Instance.new("Part")
    part.Name        = name
    part.Size        = Vector3.new(4.2, 0.3, 4.2)
    part.Material    = Enum.Material.Neon
    part.Color       = color
    part.Transparency = 0.5
    part.Anchored    = true
    part.CanCollide  = false
    part.Position    = position
    part.Parent      = workspace

    local billboard = Instance.new("BillboardGui")
    billboard.Size        = UDim2.new(0, 210, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 4.5, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent      = part

    local bg3 = Instance.new("Frame")
    bg3.Size = UDim2.new(1,0,1,0)
    bg3.BackgroundColor3 = Color3.fromRGB(12,14,22)
    bg3.BackgroundTransparency = 0.35
    bg3.BorderSizePixel = 0
    bg3.Parent = billboard
    Instance.new("UICorner", bg3).CornerRadius = UDim.new(0,8)
    local st3 = Instance.new("UIStroke", bg3)
    st3.Color = color
    st3.Thickness = 1.5
    st3.Transparency = 0.3

    local textLabel = Instance.new("TextLabel")
    textLabel.Size                 = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text                 = text
    textLabel.TextColor3           = Color3.fromRGB(255, 255, 255)
    textLabel.TextStrokeTransparency = 0.4
    textLabel.TextStrokeColor3     = color
    textLabel.Font                 = Enum.Font.GothamBold
    textLabel.TextSize             = 15
    textLabel.Parent               = bg3
    return part
end

task.spawn(function()
    createCosmicIndicator("CosmicStandHereBase1",    Vector3.new(-334.84, -5.40, 101.02), Color3.fromRGB(60, 60, 60),    "üü¢ STAND HERE (BASE 1)")
    createCosmicIndicator("CosmicTeleportHereBase1", Vector3.new(-352.98, -7.30, 74.3),   Color3.fromRGB(255, 90, 90),   "üî¥ TELEPORT (BASE 1)")
    createCosmicIndicator("CosmicStandHereBase2",    Vector3.new(-334.84, -5.40, 19.20),  Color3.fromRGB(60, 60, 60),    "üü¢ STAND HERE (BASE 2)")
    createCosmicIndicator("CosmicTeleportHereBase2", Vector3.new(-352.98, -7.30, 45.76),  Color3.fromRGB(100, 140, 255), "üîµ TELEPORT (BASE 2)")
end)

-- ============ TP LOGIC ============
local function executeTP()
    if tick() - lastTeleportTime < TELEPORT_COOLDOWN then
        warn("‚è≥ TP cooldown:", math.floor((TELEPORT_COOLDOWN - (tick() - lastTeleportTime))*10)/10, "s")
        return false
    end
    lastTeleportTime = tick()

    local Character = LocalPlayer.Character
    if not Character then Character = LocalPlayer.CharacterAdded:Wait() end

    local Humanoid = Character:WaitForChild("Humanoid")
    local HRP      = Character:WaitForChild("HumanoidRootPart")

    local Carpet = Character:FindFirstChild("Flying Carpet") or LocalPlayer.Backpack:FindFirstChild("Flying Carpet")
    if not Carpet then
        warn("ü™Ñ Flying Carpet not found!")
        return false
    end

    local currentBasePos = getCurrentBasePosition()
    local isAtBase1      = currentBasePos == TP_POSITIONS.BASE1.INFO_POS

    task.spawn(function()
        Humanoid:EquipTool(Carpet)
        if CustomPosCFrame then
            HRP.CFrame = CustomPosCFrame
        elseif isAtBase1 then
            HRP.CFrame = CFrame.new(-351.49, -6.65, 113.72); task.wait(0.15)
            HRP.CFrame = CFrame.new(-378.14, -6.00, 26.43);  task.wait(0.15)
            HRP.CFrame = CFrame.new(-334.80, -5.04, 18.90)
        else
            HRP.CFrame = CFrame.new(-352.54, -6.83, 6.66);   task.wait(0.15)
            HRP.CFrame = CFrame.new(-372.90, -6.20, 102.00); task.wait(0.15)
            HRP.CFrame = CFrame.new(-335.08, -5.10, 101.40)
        end
        autoClickNearbyPrompt()
    end)
    return true
end

-- ============ EVENT CONNECTIONS ============
local function initializeEventConnections()
    local promptConn = ProximityPromptService.PromptButtonHoldEnded:Connect(function(prompt, who)
        if who ~= LocalPlayer then return end
        if prompt.Name ~= "Steal" and prompt.ActionText ~= "Steal" and prompt.ObjectText ~= "Steal" then return end
        if not TPSysEnabled then return end

        local character = LocalPlayer.Character
        if not character then return end
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local backpack = LocalPlayer:FindFirstChild("Backpack")
        if backpack then
            local carpet = backpack:FindFirstChild("Flying Carpet")
            if carpet and character:FindFirstChild("Humanoid") then
                character.Humanoid:EquipTool(carpet)
                task.wait(0.1)
            end
        end

        if CustomPosCFrame then
            hrp.CFrame = CustomPosCFrame
            print("üìç TP to CUSTOM POSITION")
        elseif getCurrentBasePosition() == TP_POSITIONS.BASE1.INFO_POS then
            hrp.CFrame = TP_POSITIONS.BASE1.TELEPORT_POS
            print("üìç TP to BASE 1")
        else
            hrp.CFrame = TP_POSITIONS.BASE2.TELEPORT_POS
            print("üìç TP to BASE 2")
        end

        autoClickNearbyPrompt()
    end)
    table.insert(connections, promptConn)

    local heartbeatConn = RunService.Heartbeat:Connect(function(dt)
        lastMarkerUpdate = lastMarkerUpdate + dt
        if lastMarkerUpdate < MARKER_UPDATE_INTERVAL then return end
        lastMarkerUpdate = 0

        local character = LocalPlayer.Character
        if not character then return end
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local basePos   = getCurrentBasePosition()
        local markerPos = basePos * CFrame.new(0, -3.2, 0)

        if Marker and Marker.Parent then
            Marker.CFrame = markerPos
            local dist    = (hrp.Position - basePos.Position).Magnitude
            Marker.Color  = dist < 7 and Color3.fromRGB(0, 255, 120) or Color3.fromRGB(255, 60, 60)
        end
    end)
    table.insert(connections, heartbeatConn)

    print("‚úÖ Event connections initialized")
end

task.spawn(initializeEventConnections)

-- ============ KEYWORD KICK WATCHER ============
local KEYWORD      = "You stole"
local KICK_MESSAGE = "EZZ"

local function hasKeyword(text)
    return typeof(text) == "string" and text:lower():find(KEYWORD, 1, true) ~= nil
end

local function watchObject(obj)
    if not (obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox")) then return end
    if obj.Visible and obj.Text and hasKeyword(obj.Text) then
        task.spawn(function() pcall(function() LocalPlayer:Kick(KICK_MESSAGE) end) end)
        return
    end
    if obj.Visible then
        local conn = obj:GetPropertyChangedSignal("Text"):Connect(function()
            if hasKeyword(obj.Text) then
                task.spawn(function() pcall(function() LocalPlayer:Kick(KICK_MESSAGE) end) end)
            end
        end)
        table.insert(connections, conn)
    end
end

local lastScanTime = 0
local SCAN_COOLDOWN = 0.5
local MAX_SCAN_TIME = 0.016

local function optimizedScanDescendants(parent)
    local currentTime = tick()
    if currentTime - lastScanTime < SCAN_COOLDOWN then return end
    lastScanTime = currentTime
    task.spawn(function()
        local startTime = tick()
        local textObjects = {}
        for _, obj in ipairs(parent:GetDescendants()) do
            if tick() - startTime > MAX_SCAN_TIME then break end
            if (obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox")) and obj.Visible and obj.Text then
                table.insert(textObjects, obj)
            end
        end
        for i = 1, #textObjects, 15 do
            for j = i, math.min(i+14, #textObjects) do watchObject(textObjects[j]) end
            task.wait(0.05)
        end
    end)
end

local childAddedDebounce = false
local function debouncedWatchObject(obj)
    if not childAddedDebounce then
        childAddedDebounce = true
        watchObject(obj)
        childAddedDebounce = false
    end
end

task.spawn(function()
    local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
    task.wait(2)
    optimizedScanDescendants(PlayerGui)
    local c1 = PlayerGui.ChildAdded:Connect(function(gui)
        task.wait(0.1)
        if gui:IsA("ScreenGui") then optimizedScanDescendants(gui)
        else debouncedWatchObject(gui) end
    end)
    table.insert(connections, c1)
    local c2 = PlayerGui.DescendantAdded:Connect(debouncedWatchObject)
    table.insert(connections, c2)
end)

task.spawn(function()
    local c = Players.PlayerRemoving:Connect(function(player)
        if player == LocalPlayer then
            cleanup()
            _G.MyskypInstaSteal = false
            pcall(_G.MySkyCleanup)
        end
    end)
    table.insert(connections, c)
end)

-- ============ DESYNC FLAGS ============
local FFlags = {
    GameNetPVHeaderRotationalVelocityZeroCutoffExponent = -5000,
    LargeReplicatorWrite5 = true,
    LargeReplicatorEnabled9 = true,
    AngularVelociryLimit = 360,
    TimestepArbiterVelocityCriteriaThresholdTwoDt = 2147483646,
    S2PhysicsSenderRate = 15000,
    DisableDPIScale = true,
    MaxDataPacketPerSend = 2147483647,
    PhysicsSenderMaxBandwidthBps = 20000,
    TimestepArbiterHumanoidLinearVelThreshold = 21,
    MaxMissedWorldStepsRemembered = -2147483648,
    PlayerHumanoidPropertyUpdateRestrict = true,
    SimDefaultHumanoidTimestepMultiplier = 0,
    StreamJobNOUVolumeLengthCap = 2147483647,
    DebugSendDistInSteps = -2147483648,
    GameNetDontSendRedundantNumTimes = 1,
    CheckPVLinearVelocityIntegrateVsDeltaPositionThresholdPercent = 1,
    CheckPVDifferencesForInterpolationMinVelThresholdStudsPerSecHundredth = 1,
    LargeReplicatorSerializeRead3 = true,
    ReplicationFocusNouExtentsSizeCutoffForPauseStuds = 2147483647,
    CheckPVCachedVelThresholdPercent = 10,
    CheckPVDifferencesForInterpolationMinRotVelThresholdRadsPerSecHundredth = 1,
    GameNetDontSendRedundantDeltaPositionMillionth = 1,
    InterpolationFrameVelocityThresholdMillionth = 5,
    StreamJobNOUVolumeCap = 2147483647,
    InterpolationFrameRotVelocityThresholdMillionth = 5,
    CheckPVCachedRotVelThresholdPercent = 10,
    WorldStepMax = 30,
    InterpolationFramePositionThresholdMillionth = 5,
    TimestepArbiterHumanoidTurningVelThreshold = 1,
    SimOwnedNOUCountThresholdMillionth = 2147483647,
    GameNetPVHeaderLinearVelocityZeroCutoffExponent = -5000,
    NextGenReplicatorEnabledWrite4 = true,
    TimestepArbiterOmegaThou = 1073741823,
    MaxAcceptableUpdateDelay = 1,
    LargeReplicatorSerializeWrite4 = true
}

local function applyFFlags(flags)
    for name, value in pairs(flags) do
        pcall(function() setfflag(tostring(name), tostring(value)) end)
    end
end

local function respawn(plr)
    local char = plr.Character
    if char then
        local hum = char:FindFirstChildOfClass("Humanoid")
        if hum then hum:ChangeState(Enum.HumanoidStateType.Dead) end
        char:ClearAllChildren()
        local newChar = Instance.new("Model")
        newChar.Parent = workspace
        plr.Character  = newChar
        task.wait()
        plr.Character  = char
        newChar:Destroy()
    end
end

local function applyPermanentDesync()
    applyFFlags(FFlags)
    if desyncFirstActivation then
        respawn(LocalPlayer)
        desyncFirstActivation = false
    end
    desyncPermanentlyActivated = true
end

-- ============ FINAL CLEANUP FUNCTION ============
_G.MySkyCleanup = function()
    cleanup()
    ClearCustomVisuals()
    for _, part in ipairs(workspace:GetChildren()) do
        if part.Name:find("myskyp") or part.Name:find("Cosmic") or part.Name == "CustomGrabPoint" then
            pcall(function() part:Destroy() end)
        end
    end
    local CoreGui = getService("CoreGui")
    local existingGui = CoreGui:FindFirstChild("SemiInstaSteal")
    if existingGui then pcall(function() existingGui:Destroy() end) end
    _G.MyskypInstaSteal = false
    _G.MySkyConnections = nil
end

-- ============ UI BUILDER UTILS ============
local function addCorner(parent, radius)
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0, radius or 8)
    c.Parent = parent
    return c
end

local function addStroke(parent, color, thickness, transparency)
    local s = Instance.new("UIStroke")
    s.Color        = color or T.accent
    s.Thickness    = thickness or 1.5
    s.Transparency = transparency or 0.3
    s.Parent       = parent
    return s
end

local function addGradient(parent, c0, c1, rot)
    local g = Instance.new("UIGradient")
    g.Color    = ColorSequence.new(c0, c1)
    g.Rotation = rot or 135
    g.Parent   = parent
    return g
end

local function makeLabel(parent, text, font, size, color, pos, sz, xAlign)
    local l = Instance.new("TextLabel")
    l.BackgroundTransparency = 1
    l.Text      = text
    l.Font      = font or Enum.Font.GothamBold
    l.TextSize  = size or 14
    l.TextColor3 = color or T.text
    l.Position  = pos  or UDim2.new(0,0,0,0)
    l.Size      = sz   or UDim2.new(1,0,1,0)
    l.TextXAlignment = xAlign or Enum.TextXAlignment.Left
    l.Parent    = parent
    return l
end

-- ============ TOGGLE BUILDER ============
local function createToggle(parent, text, yPos)
    local container = Instance.new("Frame")
    container.Size             = UDim2.new(1, -16, 0, 38)
    container.Position         = UDim2.new(0, 8, 0, yPos)
    container.BackgroundColor3 = T.card
    container.BorderSizePixel  = 0
    container.Parent           = parent
    addCorner(container, 10)
    addStroke(container, T.accent, 1.5, 0.5)

    makeLabel(container, text, Enum.Font.GothamBold, 14, T.text,
        UDim2.new(0,12,0,0), UDim2.new(1,-70,1,0), Enum.TextXAlignment.Left)

    local switch = Instance.new("Frame")
    switch.Size             = UDim2.new(0, 46, 0, 24)
    switch.Position         = UDim2.new(1, -54, 0.5, -12)
    switch.BackgroundColor3 = T.red
    switch.BorderSizePixel  = 0
    switch.Parent           = container
    addCorner(switch, 12)

    local knob = Instance.new("Frame")
    knob.Size             = UDim2.new(0, 18, 0, 18)
    knob.Position         = UDim2.new(0, 3, 0, 3)
    knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
    knob.BorderSizePixel  = 0
    knob.Parent           = switch
    addCorner(knob, 9)

    local button = Instance.new("TextButton")
    button.Size                  = UDim2.new(1,0,1,0)
    button.BackgroundTransparency = 1
    button.Text                  = ""
    button.Parent                = container

    return button, switch, knob
end

local function setToggle(sw, kn, enabled)
    TweenService:Create(sw, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {
        BackgroundColor3 = enabled and T.green or T.red
    }):Play()
    TweenService:Create(kn, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {
        Position = enabled and UDim2.new(1,-21,0,3) or UDim2.new(0,3,0,3)
    }):Play()
end

-- ============ ACTION BUTTON BUILDER ============
local function makeActionButton(parent, text, color, yPos, height)
    local btn = Instance.new("TextButton")
    btn.Size             = UDim2.new(1, -16, 0, height or 36)
    btn.Position         = UDim2.new(0, 8, 0, yPos)
    btn.BackgroundColor3 = color or T.accent
    btn.Text             = text
    btn.Font             = Enum.Font.GothamBold
    btn.TextSize         = 14
    btn.TextColor3       = Color3.fromRGB(255,255,255)
    btn.BorderSizePixel  = 0
    btn.AutoButtonColor  = false
    btn.Parent           = parent
    addCorner(btn, 10)
    addStroke(btn, Color3.fromRGB(255,255,255), 1.5, 0.65)

    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.15), {BackgroundColor3 = color and Color3.new(
            math.clamp(color.R+0.08, 0, 1),
            math.clamp(color.G+0.08, 0, 1),
            math.clamp(color.B+0.08, 0, 1)
        ) or T.cardHover}):Play()
    end)
    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.15), {BackgroundColor3 = color or T.card}):Play()
    end)

    return btn
end

-- ============ SECTION LABEL ============
local function makeSectionLabel(parent, text, yPos)
    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(1,-16,0,18)
    lbl.Position = UDim2.new(0,8,0,yPos)
    lbl.BackgroundTransparency = 1
    lbl.Text = text
    lbl.Font = Enum.Font.GothamBold
    lbl.TextSize = 11
    lbl.TextColor3 = T.subtext
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.Parent = parent
    return lbl
end

-- ============ SEPARATOR ============
local function makeSep(parent, yPos)
    local f = Instance.new("Frame")
    f.Size             = UDim2.new(1,-16,0,1)
    f.Position         = UDim2.new(0,8,0,yPos)
    f.BackgroundColor3 = T.accent
    f.BackgroundTransparency = 0.7
    f.BorderSizePixel  = 0
    f.Parent           = parent
end

-- ============ MAIN UI ============
local function loadMainUI()
    local playerGui = LocalPlayer:WaitForChild("PlayerGui")

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name          = "SemiInstaSteal"
    screenGui.ResetOnSpawn  = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.Parent        = playerGui

    -- ‚îÄ‚îÄ MAIN FRAME ‚îÄ‚îÄ
    local PANEL_W = 290
    local PANEL_H = IS_MOBILE and 360 or 430

    local mainFrame = Instance.new("Frame")
    mainFrame.Name             = "MainFrame"
    mainFrame.Size             = UDim2.new(0, PANEL_W, 0, PANEL_H)
    mainFrame.Position         = UDim2.new(1, PANEL_W + 20, 0, 70)
    mainFrame.BackgroundColor3 = T.bg
    mainFrame.BorderSizePixel  = 0
    mainFrame.Parent           = screenGui
    addCorner(mainFrame, 14)
    addStroke(mainFrame, T.accent, 2, 0.25)
    addGradient(mainFrame, Color3.fromRGB(18, 22, 35), Color3.fromRGB(12, 14, 22), 145)

    -- glow overlay
    local glow = Instance.new("ImageLabel")
    glow.Size = UDim2.new(1.4,0,0.4,0)
    glow.Position = UDim2.new(-0.2,0,-0.15,0)
    glow.BackgroundTransparency = 1
    glow.Image = "rbxassetid://7912134082"
    glow.ImageColor3 = T.accent
    glow.ImageTransparency = 0.85
    glow.ZIndex = 0
    glow.Parent = mainFrame

    -- ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ
    local header = Instance.new("Frame")
    header.Name            = "Header"
    header.Size            = UDim2.new(1, 0, 0, 62)
    header.BackgroundColor3 = T.card
    header.BorderSizePixel = 0
    header.Parent          = mainFrame
    addCorner(header, 14)
    addStroke(header, T.accent, 1.5, 0.4)
    addGradient(header, Color3.fromRGB(30, 38, 60), Color3.fromRGB(22, 28, 44), 135)

    -- logo dot
    local dot = Instance.new("Frame")
    dot.Size             = UDim2.new(0, 10, 0, 10)
    dot.Position         = UDim2.new(0, 14, 0.5, -5)
    dot.BackgroundColor3 = T.green
    dot.BorderSizePixel  = 0
    dot.Parent           = header
    addCorner(dot, 5)

    local titleLbl = Instance.new("TextLabel")
    titleLbl.Size = UDim2.new(1,-40,0,26)
    titleLbl.Position = UDim2.new(0,30,0,8)
    titleLbl.BackgroundTransparency = 1
    titleLbl.Text = "‚ô• SEMI INSTA STEAL"
    titleLbl.Font = Enum.Font.GothamBlack
    titleLbl.TextSize = 16
    titleLbl.TextColor3 = T.text
    titleLbl.TextXAlignment = Enum.TextXAlignment.Left
    titleLbl.Parent = header

    local subLbl = Instance.new("TextLabel")
    subLbl.Size = UDim2.new(1,-40,0,18)
    subLbl.Position = UDim2.new(0,30,0,34)
    subLbl.BackgroundTransparency = 1
    subLbl.Text = "CAPYBARA  ‚Ä¢  v2.0"
    subLbl.Font = Enum.Font.GothamMedium
    subLbl.TextSize = 12
    subLbl.TextColor3 = T.subtext
    subLbl.TextXAlignment = Enum.TextXAlignment.Left
    subLbl.Parent = header

    -- ‚îÄ‚îÄ CONTENT SCROLL ‚îÄ‚îÄ
    local scroll = Instance.new("ScrollingFrame")
    scroll.Name             = "Content"
    scroll.Size             = UDim2.new(1, 0, 1, -68)
    scroll.Position         = UDim2.new(0, 0, 0, 64)
    scroll.BackgroundTransparency = 1
    scroll.BorderSizePixel  = 0
    scroll.ScrollBarThickness = 3
    scroll.ScrollBarImageColor3 = T.accent
    scroll.CanvasSize       = UDim2.new(0, 0, 0, 0) -- updated dynamically
    scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    scroll.Parent           = mainFrame

    local layout = Instance.new("UIListLayout")
    layout.SortOrder    = Enum.SortOrder.LayoutOrder
    layout.Padding      = UDim.new(0, 6)
    layout.Parent       = scroll

    local pad = Instance.new("UIPadding")
    pad.PaddingTop    = UDim.new(0, 6)
    pad.PaddingBottom = UDim.new(0, 10)
    pad.PaddingLeft   = UDim.new(0, 8)
    pad.PaddingRight  = UDim.new(0, 8)
    pad.Parent        = scroll

    -- helper to add items with layout order
    local layoutOrder = 0
    local function addToScroll(item)
        layoutOrder += 1
        item.LayoutOrder = layoutOrder
        item.Parent      = scroll
    end

    local function makeSection(text)
        local lbl = Instance.new("TextLabel")
        lbl.Size = UDim2.new(1,0,0,16)
        lbl.BackgroundTransparency = 1
        lbl.Text = text
        lbl.Font = Enum.Font.GothamBold
        lbl.TextSize = 10
        lbl.TextColor3 = T.subtext
        lbl.TextXAlignment = Enum.TextXAlignment.Left
        addToScroll(lbl)
        return lbl
    end

    local function makeSepItem()
        local f = Instance.new("Frame")
        f.Size = UDim2.new(1,0,0,1)
        f.BackgroundColor3 = T.accent
        f.BackgroundTransparency = 0.75
        f.BorderSizePixel = 0
        addToScroll(f)
        return f
    end

    local function makeToggleItem(text, initState)
        local container = Instance.new("Frame")
        container.Size = UDim2.new(1,0,0,40)
        container.BackgroundColor3 = T.card
        container.BorderSizePixel = 0
        addCorner(container, 10)
        addStroke(container, T.accent, 1, 0.6)
        addToScroll(container)

        local lbl = Instance.new("TextLabel")
        lbl.Size = UDim2.new(1,-70,1,0)
        lbl.Position = UDim2.new(0,12,0,0)
        lbl.BackgroundTransparency = 1
        lbl.Text = text
        lbl.Font = Enum.Font.GothamBold
        lbl.TextSize = 14
        lbl.TextColor3 = T.text
        lbl.TextXAlignment = Enum.TextXAlignment.Left
        lbl.Parent = container

        local sw = Instance.new("Frame")
        sw.Size = UDim2.new(0,46,0,24)
        sw.Position = UDim2.new(1,-54,0.5,-12)
        sw.BackgroundColor3 = initState and T.green or T.red
        sw.BorderSizePixel = 0
        sw.Parent = container
        addCorner(sw, 12)

        local kn = Instance.new("Frame")
        kn.Size = UDim2.new(0,18,0,18)
        kn.Position = initState and UDim2.new(1,-21,0,3) or UDim2.new(0,3,0,3)
        kn.BackgroundColor3 = Color3.fromRGB(255,255,255)
        kn.BorderSizePixel = 0
        kn.Parent = sw
        addCorner(kn, 9)

        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1,0,1,0)
        btn.BackgroundTransparency = 1
        btn.Text = ""
        btn.Parent = container

        return btn, sw, kn, lbl
    end

    local function makeBtn(text, color, h)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1,0,0, h or 38)
        btn.BackgroundColor3 = color
        btn.Text = text
        btn.Font = Enum.Font.GothamBold
        btn.TextSize = 14
        btn.TextColor3 = Color3.fromRGB(255,255,255)
        btn.BorderSizePixel = 0
        btn.AutoButtonColor = false
        addCorner(btn, 10)
        addStroke(btn, Color3.fromRGB(255,255,255), 1.2, 0.7)
        addToScroll(btn)

        btn.MouseEnter:Connect(function()
            TweenService:Create(btn, TweenInfo.new(0.12), {BackgroundTransparency = 0.12}):Play()
        end)
        btn.MouseLeave:Connect(function()
            TweenService:Create(btn, TweenInfo.new(0.12), {BackgroundTransparency = 0}):Play()
        end)
        return btn
    end

    -- ‚îÄ‚îÄ SYSTEM SECTION ‚îÄ‚îÄ
    makeSection("‚öôÔ∏è  SYSTEM")

    local tpBtn, tpSw, tpKn, tpLbl = makeToggleItem("üéÆ  Teleport System", true)
    local TPSysState = true

    tpBtn.MouseButton1Click:Connect(function()
        TPSysState = not TPSysState
        TPSysEnabled = TPSysState
        setToggle(tpSw, tpKn, TPSysState)
        if not TPSysState then
            if Marker and Marker.Parent then pcall(function() Marker:Destroy() end) end
        else
            Marker = CreateMarker()
        end
    end)

    makeSepItem()
    makeSection("‚ö°  DESYNC")

    local desyncBtn, desyncSw, desyncKn, desyncLbl = makeToggleItem("üíª  Activate Desync", false)

    desyncBtn.MouseButton1Click:Connect(function()
        if desyncPermanentlyActivated then return end
        desyncBtn.Active = false

        task.spawn(function()
            desyncLbl.Text = "üíª  Preparing..."
            if desyncFirstActivation then
                respawn(LocalPlayer)
                desyncFirstActivation = false
                applyPermanentDesync()
            end
            task.wait(1.5)
            desyncLbl.Text = "üíª  Almost done..."
            task.wait(2)
            desyncLbl.Text = "üíª  Finalizing..."
            task.wait(0.8)
            desyncLbl.Text = "üíª  ‚úÖ Active!"
            desyncPermanentlyActivated = true
            setToggle(desyncSw, desyncKn, true)
        end)
    end)

    makeSepItem()
    makeSection("üìç  CUSTOM POSITION")

    local setPosBtn = makeBtn("üìç  Set Custom Position", Color3.fromRGB(40, 120, 255))

    local delPosBtn = makeBtn("üóëÔ∏è  Delete Custom Position", Color3.fromRGB(180, 40, 60))

    -- set pos logic
    setPosBtn.MouseButton1Click:Connect(function()
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            CustomPosCFrame = LocalPlayer.Character.HumanoidRootPart.CFrame
            setPosBtn.Text  = "‚úÖ  Position Saved!"
            task.wait(1.2)
            setPosBtn.Text  = "üìç  Set Custom Position"
            print("üìç Custom Position Set:", CustomPosCFrame)
        end
    end)

    -- delete pos logic
    delPosBtn.MouseButton1Click:Connect(function()
        if CustomPosCFrame then
            CustomPosCFrame = nil
            ClearCustomVisuals()
            delPosBtn.Text  = "‚úÖ  Position Cleared!"
            task.wait(1.2)
            delPosBtn.Text  = "üóëÔ∏è  Delete Custom Position"
            print("üóëÔ∏è Custom Position Deleted")
        else
            delPosBtn.Text  = "‚ö†Ô∏è  No Position Set!"
            task.wait(1.2)
            delPosBtn.Text  = "üóëÔ∏è  Delete Custom Position"
        end
    end)

    -- ‚îÄ‚îÄ TP TO PET BUTTON (PC only) ‚îÄ‚îÄ
    if IS_PC then
        makeSepItem()
        makeSection("üöÄ  TELEPORT")

        local tpPetBtn = makeBtn("‚ö°  TP To Pet  [G]", Color3.fromRGB(130, 60, 220))

        tpPetBtn.MouseButton1Click:Connect(function()
            tpPetBtn.Text = "‚è≥  Teleporting..."
            local ok = executeTP()
            task.wait(0.7)
            tpPetBtn.Text = ok and "‚úÖ  Done!" or "‚ùå  Failed!"
            task.wait(0.8)
            tpPetBtn.Text = "‚ö°  TP To Pet  [G]"
        end)

        local inputConn = UserInputService.InputBegan:Connect(function(input, gp)
            if input.KeyCode == Enum.KeyCode.G and not gp then
                tpPetBtn.Text = "‚è≥  Teleporting..."
                local ok = executeTP()
                task.wait(0.7)
                tpPetBtn.Text = ok and "‚úÖ  Done!" or "‚ùå  Failed!"
                task.wait(0.8)
                tpPetBtn.Text = "‚ö°  TP To Pet  [G]"
            end
        end)
        table.insert(connections, inputConn)
    end

    -- ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ
    local footer = Instance.new("TextLabel")
    footer.Size = UDim2.new(1,0,0,20)
    footer.BackgroundTransparency = 1
    footer.Text = "Capybara üêπ "
    footer.Font = Enum.Font.GothamMedium
    footer.TextSize = 11
    footer.TextColor3 = T.subtext
    footer.TextXAlignment = Enum.TextXAlignment.Center
    footer.Position = UDim2.new(0,0,1,-24)
    footer.Parent = mainFrame

    -- ‚îÄ‚îÄ DRAG ‚îÄ‚îÄ
    local dragging, dragStart, startPos = false, nil, nil
    header.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1
        or input.UserInputType == Enum.UserInputType.Touch then
            dragging  = true
            dragStart = input.Position
            startPos  = mainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    local dragConn = UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement
            or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + delta.X,
                startPos.Y.Scale, startPos.Y.Offset + delta.Y
            )
        end
    end)
    table.insert(connections, dragConn)

    -- ‚îÄ‚îÄ SLIDE IN ANIMATION ‚îÄ‚îÄ
    task.spawn(function()
        task.wait(0.3)
        TweenService:Create(mainFrame, TweenInfo.new(0.55, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
            Position = UDim2.new(1, -(PANEL_W + 16), 0, 70)
        }):Play()
    end)
end

-- ============ LOADING SCREEN ============
local function showLoadScreen()
    local playerGui = LocalPlayer:WaitForChild("PlayerGui")

    local loadGui = Instance.new("ScreenGui")
    loadGui.Name          = "PremiumLoadScreen"
    loadGui.ResetOnSpawn  = false
    loadGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    loadGui.DisplayOrder  = 1000
    loadGui.Parent        = playerGui

    local bg = Instance.new("Frame")
    bg.Size             = UDim2.new(1,0,1,0)
    bg.BackgroundColor3 = Color3.fromRGB(0,0,0)
    bg.BackgroundTransparency = 0.25
    bg.BorderSizePixel  = 0
    bg.Parent           = loadGui

    local card = Instance.new("Frame")
    card.Name             = "Card"
    card.Size             = UDim2.new(0, 380, 0, 240)
    card.Position         = UDim2.new(0.5,-190, 0.5,-120)
    card.BackgroundColor3 = Color3.fromRGB(14, 16, 26)
    card.BackgroundTransparency = 0.05
    card.BorderSizePixel  = 0
    card.Parent           = bg
    addCorner(card, 18)
    addStroke(card, T.accent, 2, 0.2)
    addGradient(card, Color3.fromRGB(22, 28, 45), Color3.fromRGB(12, 14, 22), 145)

    local logoLbl = Instance.new("TextLabel")
    logoLbl.Size = UDim2.new(1,0,0,50)
    logoLbl.Position = UDim2.new(0,0,0,25)
    logoLbl.BackgroundTransparency = 1
    logoLbl.Text = "‚ô•"
    logoLbl.Font = Enum.Font.GothamBlack
    logoLbl.TextSize = 36
    logoLbl.TextColor3 = T.accent
    logoLbl.TextXAlignment = Enum.TextXAlignment.Center
    logoLbl.Parent = card

    local titleLbl = Instance.new("TextLabel")
    titleLbl.Size = UDim2.new(1,0,0,36)
    titleLbl.Position = UDim2.new(0,0,0,72)
    titleLbl.BackgroundTransparency = 1
    titleLbl.Text = "SEMI INSTA STEAL"
    titleLbl.Font = Enum.Font.GothamBlack
    titleLbl.TextSize = 26
    titleLbl.TextColor3 = T.text
    titleLbl.TextXAlignment = Enum.TextXAlignment.Center
    titleLbl.Parent = card

    local subLbl = Instance.new("TextLabel")
    subLbl.Size = UDim2.new(1,0,0,20)
    subLbl.Position = UDim2.new(0,0,0,108)
    subLbl.BackgroundTransparency = 1
    subLbl.Text = "CAPYBARA  ‚Ä¢  v2.0"
    subLbl.Font = Enum.Font.GothamMedium
    subLbl.TextSize = 13
    subLbl.TextColor3 = T.subtext
    subLbl.TextXAlignment = Enum.TextXAlignment.Center
    subLbl.Parent = card

    -- progress bar
    local barBg = Instance.new("Frame")
    barBg.Size = UDim2.new(0,300,0,7)
    barBg.Position = UDim2.new(0.5,-150,0,155)
    barBg.BackgroundColor3 = Color3.fromRGB(30,35,55)
    barBg.BorderSizePixel = 0
    barBg.Parent = card
    addCorner(barBg, 4)

    local barFill = Instance.new("Frame")
    barFill.Size = UDim2.new(0,0,1,0)
    barFill.BackgroundColor3 = T.accent
    barFill.BorderSizePixel = 0
    barFill.Parent = barBg
    addCorner(barFill, 4)
    addGradient(barFill, T.accent, T.accent2, 90)

    local statusLbl = Instance.new("TextLabel")
    statusLbl.Size = UDim2.new(1,0,0,18)
    statusLbl.Position = UDim2.new(0,0,0,172)
    statusLbl.BackgroundTransparency = 1
    statusLbl.Text = "Loading..."
    statusLbl.Font = Enum.Font.GothamMedium
    statusLbl.TextSize = 12
    statusLbl.TextColor3 = T.subtext
    statusLbl.TextXAlignment = Enum.TextXAlignment.Center
    statusLbl.Parent = card

    local steps = {
        {pct=15,  text="Initializing services..."},
        {pct=35,  text="Setting up connections..."},
        {pct=55,  text="Building interface..."},
        {pct=75,  text="Configuring positions..."},
        {pct=90,  text="Almost ready..."},
        {pct=100, text="Ready!"},
    }

    -- slide in
    card.Position = UDim2.new(0.5,-190, 0.55,-120)
    card.BackgroundTransparency = 1
    TweenService:Create(card, TweenInfo.new(0.45, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Position = UDim2.new(0.5,-190,0.5,-120),
        BackgroundTransparency = 0.05
    }):Play()
    task.wait(0.5)

    for _, step in ipairs(steps) do
        TweenService:Create(barFill, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {
            Size = UDim2.new(step.pct/100, 0, 1, 0)
        }):Play()
        statusLbl.Text = step.text
        task.wait(0.18)
    end

    task.wait(0.4)
    TweenService:Create(card, TweenInfo.new(0.4, Enum.EasingStyle.Quad), {BackgroundTransparency = 1}):Play()
    TweenService:Create(bg,   TweenInfo.new(0.4, Enum.EasingStyle.Quad), {BackgroundTransparency = 1}):Play()
    task.wait(0.45)
    loadGui:Destroy()
    loadMainUI()
end

showLoadScreen()

print("‚ú® Device:", IS_MOBILE and "MOBILE" or "PC")
print("üéØ Auto-click ProximityPrompt: ENABLED")
print("üìç Custom Position: ENABLED  |  üóëÔ∏è Delete Custom Position: ENABLED")
print("üíú Script v2.0 ‚Äî ARTFUL & MYSKYP")
